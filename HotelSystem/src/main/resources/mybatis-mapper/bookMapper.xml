<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hotel.management.v1.client.book.dao.bookDao">
	
	<select id="findRoomFromAndTo" resultType="hotel.management.v1.client.book.dto.bookDto$findRoom">
		SELECT r.gradename, COUNT(*) - (
  SELECT COUNT(*)
  FROM roombooking
  WHERE bookroomgrade = r.gradename and (roombooking.checkin &lt; to_date(#{from},'MM/DD/YYYY') and roombooking.checkout &gt; to_date(#{to},'MM/DD/YYYY'))
) AS reservableornot
FROM room r
GROUP BY r.gradename
	</select>
</mapper>